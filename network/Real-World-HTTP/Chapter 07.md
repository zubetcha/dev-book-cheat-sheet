# Chapter 07 - HTTP/2의 신택스: 프로토콜 재정의

## 7.1 HTTP/2

- 데이터 표현이 HTTP/1.1과는 크게 달라짐
  - 스트림(1.1의 파이프라인에 가까움)을 사용해 바이너리 데이터를 다중으로 송수신하는 구조로 변경
  - 스트림 내 우선 순위 설정과 서버 사이드에서ㅜ 데이터 통신을 하는 서버 사이트 푸시 구현
  - 헤더 압축
- HTTP가 제공하는 기본 4개 요소는 변경되지 않음
  - 메서드, 헤더, 스테이터스, 바디
  - 사용하는 쪽(클라이언ㅌ, 서버)을 제외한 통신 레벨에서는 큰 변경이 없음

**프로토콜 개선사항**

- 캐시(max-age): 통신 자체를 취소
- 캐시(ETag, Date): 변경이 없으면 바디를 취소
- Keep-Alive: 액세스마다 연결에 걸리는 시간(1.5TTL)을 줄임
- 압축: 응답 바디 크기 절감
- 청크: 응답 전송 시작을 빠르게 함
- 파이프라이닝: 통신 다중화

### 7.1.1 스트림을 이용한 통신 고속화

- 텍스트 기반 프로토콜에서 바이너리 기반 프로토콜로 변화
- HTTP/1.1까지는 하나의 요청이 TCP 소켓을 독점
  - 하나의 오리지널 서버에 대해 2~6개의 TCP 접속을 해서 병렬화
- HTTP/2에서는 하나의 TCP 접속 안에 스트림이라는 가상의 TCP 소켓을 만들어 통신

**스트림**
- 프레임에 따른 플래그로 간단히 만들고 닫을 수 있는 규칙으로 구성
- 일반 TCP 소켓과 같은 핸드셰이크는 불필요
- 따라서 ID 값과 TCP 통신 용량이 허락하는 한, 손쉽게 몇 만번의 접속이라도 병렬화 가능