# Chapter 04 - HTTP/1.1μ μ‹ νƒμ¤: κ³ μ†ν™”μ™€ μ•μ •μ„±μ„ μ¶”κµ¬ν• ν™•μ¥

#### HTTP/1.1 μ£Όμ” λ³€κ²½μ‚¬ν•­

- ν†µμ‹  κ³ μ†ν™”
  - Keep-Aliveκ°€ κΈ°λ³Έμ μΌλ΅ μ ν¨
  - νμ΄ν”„λΌμ΄λ‹
- TLSμ— μν• μ•”νΈν™” ν†µμ‹  μ§€μ›
- μƒ λ©”μ„λ“ μ¶”κ°€
  - PUTκ³Ό DELETEκ°€ ν•„μ λ©”μ„λ“κ°€ λ¨
  - OPTION, TRACE, CONNECT λ©”μ„λ“ μ¶”κ°€
- ν”„λ΅ν† μ½ μ—…λ°μ΄νΈ
- μ΄λ¦„μ„ μ΄μ©ν• κ°€μƒ νΈμ¤νΈλ¥Ό μ§€μ›
- ν¬κΈ°λ¥Ό μ‚¬μ „μ— μ• μ μ—†λ” μ½ν…μΈ μ μ²­ν¬ μ „μ†΅ μΈμ½”λ”© μ§€μ›

### 4.1 ν†µμ‹  κ³ μ†ν™”

- μΊμ‹ λν• HTTP/1.1μ κΈ°λ¥
- μΊμ‹λ” μ½ν…μΈ  λ¦¬μ†μ¤μ ν†µμ‹  μµμ ν™” κΈ°μ 
- `Keep-Alive`μ™€ `νμ΄ν”„λΌμ΄λ‹`μ€ λ²”μ©μ μΌλ΅ λ¨λ“  HTTP ν†µμ‹ μ„ κ³ μ†ν™” ν•λ” κΈ°λ¥

#### Keep-Alive

![keep-alive](https://www.haproxy.com/assets/posts/perisitent-connection.png)

| Keep-Alive μ λ¬΄ | μ„¤λ…                                        |
| :-------------: | ------------------------------------------- |
|        X        | ν•λ‚μ μ”μ²­λ§λ‹¤ ν†µμ‹ μ„ λ‹«μ (λ³µμμ μ»¤λ„¥μ…) |
|        O        | μ—°μ„λ μ”μ²­μ—λ” μ ‘μ† μ¬μ΄μ© (μ»¤λ„¥μ… μ§€μ†)   |

- HTTPμ μ•„λμΈµμΈ TCP/IP ν†µμ‹ μ„ ν¨μ¨ν™”ν•λ” κµ¬μ΅°
- μ ‘μ† μ¬μ΄μ©μ μ¥μ 
  - TCP/IPμ μ ‘μ†κΉμ§€μ λ€κΈ° μ‹κ°„ λ‹¨μ¶•
  - λ¨λ°”μΌ ν†µμ‹ μ—μ„λ” λ°°ν„°λ¦¬ λ‚­λΉ„ κ°μ†
- HTTP/1.1μ—μ„λ” Keep-Alive λ™μ‘μ΄ κΈ°λ³ΈμΌλ΅ λμ–΄ μμ
- μ—°κ²° μ μ§€ κΈ°ν•
  - νƒ€μ„μ•„μ›ƒ or μ„λ²„/ν΄λΌμ΄μ–ΈνΈ μ¤‘ ν• μ½μ— λ‹¤μ ν—¤λ” λ¶€μ—¬ μ‹κΉμ§€
    ```jsx
    Connection: Close;
    ```
- ν†µμ‹  μ§€μ† μ‹κ°„ λ™μ• OS λ¦¬μ†μ¤ μ†λΉ„ β†’ μ‹¤μ  ν†µμ‹ μ€ μ—†λ”λ° μ ‘μ†μ„ μ μ§€ν•λ” κ²ƒμ€ λ‚­λΉ„

#### νμ΄ν”„λΌμ΄λ‹

![νμ΄ν”„λΌμ΄λ‹](https://blog.kakaocdn.net/dn/bpdV4n/btrub9VkLO4/2UHDW7xWK6x9RIKKorkkQ0/img.png)

- μµμ΄ μ”μ²­μ΄ μ™„λ£λκΈ° μ „μ— λ‹¤μ μ”μ²­μ„ λ³΄λ‚΄λ” κ³ μ†ν™” κΈ°μ 
- λ‹¤μ μ”μ²­κΉμ§€μ λ€κΈ° μ‹κ°„ X β†’ λ„¤νΈμ›ν¬ κ°€λ™λ¥  μ¦κ°€, μ„±λ¥ ν–¥μƒ
- μ„λ²„λ” μ”μ²­μ΄ λ“¤μ–΄μ¨ μμ„λ€λ΅ μ‘λ‹µ λ°ν™
- λΈλΌμ°μ €, μ„λ²„, ν”„λ΅μ‹ λ“±μ μ„¤μ •μ— λ”°λΌ μ λ€λ΅ λ™μ‘ν•μ§€ μ•μ„ μ μμ
- HTTP/2μ—μ„ μ¤νΈλ¦Όμ΄λΌλ” κµ¬μ΅°λ΅ μ¬νƒ„μƒ

> HOL (Head of Line Blocking)

<br/>

### 4.2 μ „μ†΅ κ³„μΈµ λ³΄μ• (TLS)

- μ•”νΈν™”λμ–΄ ν†µμ‹ μ„ μ—Ώλ³΄κ±°λ‚ λ³€κ²½ν•  μ μ—†λ” μ–‘λ°©ν–¥ ν†µμ‹ 

#### ν•΄μ‹ ν•¨μ

**ν•΄μ‹ ν•¨μμ νΉμ§•**

- κ°™μ€ μ•κ³ λ¦¬μ¦κ³Ό κ°™μ€ λ°μ΄ν„°λ¥Ό μ…λ ¥ν•λ©΄, μƒμ„±λλ” κ²°κ³Ό κ°’μ€ κ°™λ‹¤. `h(A) = X`
- μ•κ³ λ¦¬μ¦μ΄ κ°™μΌλ©΄ ν•΄μ‹ κ°’μ κΈΈμ΄λ” κ³ μ •λλ‹¤.
- ν•΄μ‹ κ°’μ—μ„ μ›λ³Έ λ°μ΄ν„°λ¥Ό μ μ¶”ν•κΈ° μ–΄λ µλ‹¤. `h(A) = X`μ Xμ—μ„ Aλ¥Ό μ°ΎκΈ° μ–΄λ µλ‹¤. (μ•½ν• μ¶©λ λ‚΄μ„±)
- κ°™μ€ ν•΄μ‹ κ°’μ„ μƒμ„±ν•λ” λ‹¤λ¥Έ λ‘ κ°μ λ°μ΄ν„°λ¥Ό μ°ΎκΈ° μ–΄λ µλ‹¤. h(A) = h(B)κ°€ λλ” μ„μμ λ°μ΄ν„° A, Bλ¥Ό μ°ΎκΈ° μ–΄λ µλ‹¤. (κ°•ν• μ¶©λ λ‚΄μ„±)

**ν•΄μ‹ κ°’μ μ©λ„**

- λ‹¤μ΄λ΅λ“ν• νμΌμ΄ κΉ¨μ§€μ§€ μ•μ•λ”μ§€ ν™•μΈ (μ²΄ν¬μ„¬, ν•‘κ±°ν”„λ¦°νΈ)
  - 1λ°”μ΄νΈλΌλ„ λ°μ΄ν„°κ°€ λ‹¤λ¥΄λ©΄ ν•΄μ‹ κ°’μ΄ λ°”λ€κΈ° λ•λ¬Έ
- λΉ λ¥Έ λΉ„κµ
  - λ°μ΄ν„° νμΌ λ‚΄μ©μ„ μΌμΌν λΉ„κµν•μ§€ μ•κ³  ν•΄μ‹ κ°’μΌλ΅λ§ λΉ„κµ (ex. Git)
- λ‚΄μ© λ™μΌμ„± νλ‹¨

**ν•΄μ‹ κ°’ ν™•μΈ CLI**

```
// Mac OS
md5 sample.rst

// Window
fciv.exe sample.rst
```

#### κ³µν†µ ν‚¤ μ•”νΈμ™€ κ³µκ° ν‚¤ μ•”νΈ κ·Έλ¦¬κ³  λ””μ§€ν„Έ μ„λ…

- μ•”νΈν™”μ—μ„ μ¤‘μ”ν• κ²ƒμ€ λ³€ν™ μ•κ³ λ¦¬μ¦μ΄ μ•λ ¤μ Έλ„ μ•μ „ν•κ² ν†µμ‹ ν•  μ μκ² ν•λ” κ²ƒ
- μΌλ°μ μΌλ΅ μ‚¬μ©ν•λ” λ°©μ‹: μ•κ³ λ¦¬μ¦ κ³µκ° + μ•”νΈν™”μ— ν•„μ”ν• ν‚¤ λ³„λ„λ΅ μ¤€λΉ„
- TLSμ—μ„μ μ‚¬μ© λ°©μ‹ μΆ…λ¥
  | μΆ…λ¥ | νΉμ§• |
  | --- | --- |
  |`κ³µν†µ ν‚¤` λ°©μ‹| - `λ€μΉ­ μ•”νΈ` <br/> - λ°μ΄ν„°λ¥Ό μ „μ†΅ν•λ” μ½κ³Ό λ°›λ” μ½ λ¨λ‘ **κ°™μ€ ν‚¤** μ‚¬μ© <br/> - ν†µμ‹ ν•λ” μΈ΅ λΌλ¦¬ ν‚¤ κ³µμ  ν•„μ”|
  |`κ³µκ° ν‚¤` λ°©μ‹| - `λΉ„λ€μΉ­ μ•”νΈ` <br /> - **κ³µκ° ν‚¤**μ™€ **λΉ„λ°€ ν‚¤** ν•„μ” <br /> - κ³µκ° ν‚¤ β†’ μ•”νΈν™” ν•λ” ν‚¤ <br/> - λΉ„λ°€ ν‚¤ β†’ μ•”νΈλ¥Ό ν•΄λ…ν•λ” ν‚¤ <br/> - λΉ„λ°€ ν‚¤λ” λ‹¤λ¥Έ μ‚¬λμ—κ² μ•λ ¤μ Έμ„  μ• λ¨|
  - κ³µν†µ ν‚¤, κ³µκ° ν‚¤ λ¨λ‘ λ°μ΄ν„° , λΉ„λ°€ ν‚¤, κ³µκ° ν‚¤κ°€ μ „λ¶€ λ°μ΄ν„°λ΅ ν‘ν„λ¨

**λ””μ§€ν„Έ μ„λ…**

- κ³µκ° ν‚¤ λ°©μ‹μ„ μ‘μ©ν• μ
- λ³Έλ¬Έ μμ²΄λ¥Ό μ•”νΈν™”ν•λ” κ²ƒμ΄ μ•„λ‹, λ¨Όμ € ν•΄μ‹ν™”ν•κ³  κ·Έ κ²°κ³Όλ¥Ό μ•”νΈν™”ν•¨

#### ν‚¤ κµν™

- ν΄λΌμ΄μ–ΈνΈ β†” μ„λ²„ μ‚¬μ΄μ— ν‚¤λ¥Ό κµν™ν•λ” κ²ƒ
- μ—¬λ¬ λ°©λ²•μ΄ μμ
  - ν΄λΌμ΄μ–ΈνΈμ—μ„ κ³µν†µ ν‚¤ μƒμ„± β†’ μ„λ²„ μΈμ¦μ„μ κ³µκ° ν‚¤λ΅ μ•”νΈν™” ν•΄ μ „μ†΅ν•λ” λ°©μ‹
  - ν‚¤ κµν™ μ „μ© μ•κ³ λ¦¬μ¦ μ‚¬μ© λ°©μ‹

**DHE μ•κ³ λ¦¬μ¦ (μΌμ‹ λ””ν”Ό-ν—¬λ¨Ό, Diffie-Hellman ephemeral)**

- ν‚¤ μμ²΄λ¥Ό κµν™ν•λ” κ²ƒ X
- ν΄λΌμ΄μ–ΈνΈμ™€ μ„λ²„μ—μ„ κ°μ ν‚¤ μ¬λ£λ¥Ό λ§λ“¤μ–΄ κµν™ν•κ³  κ°μ κ³„μ‚°ν•΄μ„ κ°™μ€ ν‚¤λ¥Ό μ–»λ” κ²ƒ
- μƒμ„±λλ” ν‚¤μ κΈΈμ΄μ™€ μ•μ „μ„± μƒκ΄€ κ΄€κ³„
- ν„μ¬λ” `2048 λΉ„νΈ` μ΄μƒ κΈΈμ΄ κ¶μ¥ (616μλ¦¬ μ •λ„μ μ†μ)
- ν”„λ΅μ‹λ” κ³„μ‚°μ΄ λ¶κ°€ν•κΈ° λ•λ¬Έμ— μ¤μ§ ν΄λΌμ΄μ–ΈνΈμ™€ μ„λ²„λ§ κ³µν†µ ν‚¤λ¥Ό κ°€μ§ μ μμ

#### κ³µν†µ ν‚¤ λ°©μ‹κ³Ό κ³µκ° ν‚¤ λ°©μ‹μ„ κµ¬λ¶„ν•΄μ„ μ‚¬μ©ν•λ” μ΄μ 

- κ³µκ° ν‚¤ λ°©μ‹μ€ λ³µμ΅ν• λ§νΌ μ•μ „μ„±μ€ λ†’μ§€λ§ κ³„μ‚°μ— κ±Έλ¦¬λ” μ‹κ°„μ΄ μ¤λ μ†μ”λ¨
- TLSλ” λ‘ λ°©μ‹μ„ μ΅°ν•©ν•΄μ„ μ‚¬μ©
  - ν†µμ‹ λ§λ‹¤ ν• λ²λ§ μ‚¬μ©λλ” κ³µν†µ ν‚¤ μƒμ„±
  - κ³µκ° ν‚¤ λ°©μ‹μΌλ΅ μƒλ€λ°©μ—κ² ν‚¤ μ „λ‹¬
  - μ΄ν›„ κ³µν†µ ν‚¤λ΅ λΉ λ¥΄κ² μ•”νΈν™”
- RSAμ™€ AES
- λ‘ λ°©μ‹μ μ†λ„ μ°¨μ΄

#### TLS ν†µμ‹  μ μ°¨

- handshake ν”„λ΅ν† μ½λ΅ ν†µμ‹ μ„ ν™•λ¦½ν•λ” λ‹¨κ³„
- record ν”„λ΅ν† μ½λ΅ λ¶λ¦¬λ” ν†µμ‹  λ‹¨κ³„
- Session Ticket κµ¬μ΅°λ¥Ό μ΄μ©ν• μ¬μ ‘μ† μ‹μ κ³ μ† handshake

1. μ„λ²„μ μ‹ λΆ°μ„± ν™•μΈ

- μ„λ²„μ μ‹ λΆ°μ„±μ„ λ³΄μ¦ν•λ” κµ¬μ΅°λ” κ³µκ° ν‚¤λ¥Ό λ³΄μ¦ν•λ” κµ¬μ΅°μ΄κΈ°λ„ ν•κΈ° λ•λ¬Έμ— `κ³µκ° ν‚¤ κΈ°λ° κµ¬μ΅°(public key infrastructure)`λΌκ³ λ„ λ¶λ¦Ό
- λΈλΌμ°μ €λ” μ„λ²„λ΅λ¶€ν„° μ„λ²„μ SSL μΈμ¦μ„λ¥Ό κ°€μ§€κ³  μ¤λ” κ²ƒλ¶€ν„° μ‹μ‘
- μ‹ λΆ°μ„± ν™•μΈμ ν•µμ‹¬μ€ `λ°ν–‰μ(μΈμ¦κΈ°κ΄€)`

> π’΅ λ£¨νΈ μΈμ¦κΈ°κ΄€  
> λ°ν–‰μκ³Ό μ£Όμ²΄μκ°€ λ™μΌν• μΈμ¦μ„

2. ν‚¤ κµν™κ³Ό ν†µμ‹  μ‹μ‘

- κ³µκ° ν‚¤ μ•”νΈ μ‚¬μ© λ°©λ²• or ν‚¤ κµν™ μ „μ© μ•κ³ λ¦¬μ¦ μ‚¬μ© λ°©λ²•μ΄ μμ
  | μμ„ | μ£Όμ²΄ | μ„¤λ… |
  | --- | --- | --- |
  |1|Server > Client| SSL μ„λ²„ μΈμ¦μ„ μ·¨λ“ |
  |2|Client| - λ‚μλ¥Ό μ‚¬μ©ν•΄ ν†µμ‹ μ© κ³µν†µ ν‚¤ μƒμ„± <br/> - μ„λ²„ μΈμ¦μ„μ— μ²¨λ¶€λμ–΄ μλ” κ³µκ° ν‚¤λ΅ ν†µμ‹ μ© κ³µν†µ ν‚¤ μ•”νΈν™” |
  |3|Cleind > Server| μ•”νΈν™”ν• κ³µν†µ ν‚¤λ¥Ό μ„λ²„λ΅ μ „λ‹¬|
  |4|Server| κ³µκ° ν‚¤μ— λ€μ‘ν•λ” λΉ„λ°€ ν‚¤λ΅ λ°μ΄ν„° λ³µνΈν™”|

3. ν†µμ‹ 

- ν†µμ‹  ν•  λ•μ—λ„ κΈ°λ°€μ„±κ³Ό λ¬΄κ²°μ„±(μ΅°μ‘ λ°©μ§€)λ¥Ό μ„ν•΄ μ•”νΈν™”
- μ•”νΈν™”μ—λ” κ³µν†µ ν‚¤ μ•”νΈ λ°©μ‹ μ•κ³ λ¦¬μ¦ μ΄μ©
- TLS 1.2 μ΄μ „ λ²„μ „
  - ν†µμ‹  λ‚΄μ©μ ν•΄μ‹ κ°’ κ³„μ‚° -> κ³µν†µ ν‚¤ μ•”νΈλ΅ μ•”νΈν™”
- TLS 1.3 μ΄ν›„ λ²„μ „
  - μΈμ¦ μ•”νΈ(AEAD)λ΅ μ ν•λ  μμ •

4. ν†µμ‹ μ κ³ μ†ν™”

- μ‹ κ· μ ‘μ† μ‹ μ‹κ°„μ΄ κ°€μ¥ μ¤λ κ±Έλ¦Ό
  - HTTPλ΅ μ—°κ²°ν•κΈ° μ „ TCP/IP λ‹¨κ³„: 1.5RTT
  - TLS handshake: 2RTT
  - HTTP μ”μ²­: 1RTT
  - ν•©κ³„: 4RTT (TCP/IP λ§μ§€λ§‰ 0.5RTT + TLS μµμ΄ ν†µμ‹ μ€ ν•¨κ» μ΄λ£¨μ–΄μ§)

> π’΅ `RTT`λ€?  
> Round Trip Timeμ μ•½μλ΅, μ”μ²­μ΄ λ„¤νΈμ›ν¬λ¥Ό ν†µν•΄ μ „λ‹¬λμ–΄ μ‘λ‹µμ΄ λλμ•„μ¤λ” λ°κΉμ§€ κ±Έλ¦¬λ” μ΄ μ‹κ°„μ„ λ»ν•¨  
> RTTλ” μΌλ°μ μΌλ΅ λ°€λ¦¬μ΄ λ‹¨μ„λ΅ μΈ΅μ •ν•λ©°, RTTκ°€ λ‚®μΌλ©΄ λ‚®μ„μλ΅ μ‚¬μ©μ κ²½ν—μ΄ ν–¥μƒλ¨

**RTT λ‹¨μ¶•μ„ μ„ν• TLS, HTTPμ μ¥μΉ**

- Keep-Alive
  - μ„Έμ…μ΄ κ³„μ† μ—΄λ ¤μμΌλ―€λ΅, μµμ΄ μ”μ²­ μ΄ν›„ RTTλ” 1μ΄ λ¨
- TLS 1.2
  - μ„Έμ… μ¬κ° κΈ°λ¥
  - μ „μ— μ‚¬μ©ν•λ μ„Έμ… IDλ¥Ό λ³΄λ‚΄λ©΄ μ΄ν›„ ν‚¤ κµν™ μƒλµ -> 1RTT
- TLS 1.3
  - μ‚¬μ „μ— ν‚¤ κ³ μ 
  - μµμ΄ μ”μ²­λ¶€ν„° 0RTT

> π’΅ QUIC (Quick UDP Internet Connections)  
> TLS μ•„λ κ³„μΈµμ„ TCPμ—μ„ UDPλ΅ λ€μ²΄ν•λ” λ°©μ‹  
> TCPμ—μ„λ” handshakeκ°€ ν•„μ”ν•μ§€λ§ UDPμ—μ„λ” μ¬μ „μ†΅κ³Ό νλ¦„ μ μ–΄κ°€ λ¶ν•„μ”

#### μ•”νΈκ°•λ„

- κ³µν†µ ν‚¤ μ•”νΈ λ°©μ‹μ λΉ„νΈ μμ— λ”°λΌ λ λ²¨μ΄ λ‚λ‰λ©°, λΉ„νΈκ°€ 1 μ¦κ°€ν•λ©΄ λ‘ λ°° κ°•ν•΄μ§
- λΉ„νΈ μμ— λ”°λ¥Έ μ•”νΈ κ°•λ„
  - 64 λΉ„νΈ: μ§§μ€ κΈ°κ°„μ κ³µκ²©μΌλ΅λ„ ν•΄λ… κ°€λ¥
  - 80 λΉ„νΈ: λ‹¨κΈ°κ°„μ μ΅°μ§μ μΈ κ³µκ²©μΌλ΅ ν•΄λ™ κ°€λ¥
  - 96 λΉ„νΈ: 10λ…„
  - 112 λΉ„νΈ: 20λ…„
  - 128 λΉ„νΈ: 30λ…„
  - 256 λΉ„νΈ: μ–‘μ μ»΄ν“¨ν„° κ³µκ²©μ— λ€ν• λ‚΄μ„±μ΄ μλ‹¤κ³  κ°„μ£Ό

#### μ•”νΈν™” μ¤μ„νΈ

> π’΅ μ•”νΈν™” μ¤μ„νΈ  
> ν‚¤ κµν™ λ°©λ²•, λ©”μ‹μ§€ μ•”νΈν™”, λ©”μ‹μ§€ μ„λ… λ°©μ‹ λ“± κ°κ°μ μ¥λ©΄μ—μ„ μ‚¬μ©ν•λ” μ•κ³ λ¦¬μ¦ μ΅°ν•©

**μ•”νΈν™” μ¤μ„νΈ μ΅°ν•© ν™•μΈ CLI**

```
openssl ciphers -v
```

**μ•”νΈν™” μ¤μ„νΈ μ΅°ν•©**
|κ°’|μλ―Έ|μ‚¬μ©λλ” κ°’μ μ|
| --- | --- | --- |
|ECDHE-RSA-AES256-GCM-SHA384|μ•”νΈν™” μ¤μ„νΈλ¥Ό μ‹λ³„ν•λ” μ΄λ¦„||
|TLSv1.2|μ•”νΈκ°€ μ§€μ›λ ν”„λ΅ν† μ½ λ²„μ „|TLSv1.2 λ“±|
|Kx=ECDH/RSA|κµν™ ν‚¤ μ•κ³ λ¦¬μ¦/μ„λ… μ•κ³ λ¦¬μ¦|DH/RSA, ECDH/ECDSA|
|Au=RSA|μΈμ¦ μ•κ³ λ¦¬μ¦|RSA/ECDSA|
|Enc=AESGCM(256)|λ μ½”λ“ μ•”νΈ μ•κ³ λ¦¬μ¦|AES-GCM, CHACHA20-POLY1305|
|Mac|λ©”μ‹μ§€ μ„λ…|AEAD, SHA386|

- HTTP/2μ RFCμ—μ„λ” μ‚¬μ©ν•λ©΄ μ„ν—ν• μ•”νΈν™” μ¤μ„νΈμ λΈ”λ™λ¦¬μ¤νΈκ°€ μ •μλμ–΄ μμ
- μ•”νΈν™” μ¤μ„νΈ μ¤‘ μ‚¬μ©ν•΄λ„ μ•μ „ν• κ²ƒ, νΈν™μ„±μ„ μ„ν•΄ λ‚¨κ²¨λ‘ κ²ƒ λ“± κµ¬μ²΄μ μΈ λ©λ΅μ€ λ¨μ§λΌ μ‚¬μ΄νΈμ—μ„ ν™•μΈ κ°€λ¥

#### ν”„λ΅ν† μ½ μ„ νƒ

**ALPN (Application-Layer Protocol Negotiation)**

- TLSμ μµμ΄ handshake μ‹ (`ClientHello`) ν΄λΌμ΄μ–ΈνΈμ—μ„ μ„λ²„λ΅ `ν΄λΌμ΄μ–ΈνΈκ°€ μ΄μ©ν•  μ μλ” ν”„λ΅ν† μ½ λ©λ΅`μ„ μ²¨λ¶€ν•μ—¬ μ „μ†΅
- μ„λ²„λ” κ·Έμ— λ€ν• μ‘λ‹µ(`ServerHello`)μΌλ΅ ν‚¤ κµν™μ„ ν•κ³  μΈμ¦μ„μ™€ ν•¨κ» `μ„ νƒν• ν”„λ΅ν† μ½`μ„ ν΄λΌμ΄μ–ΈνΈλ΅ μ „μ†΅
- μ„ νƒν•  μ μλ” ν”„λ΅ν† μ½ λ©λ΅μ€ `IANA`μ—μ„ κ΄€λ¦¬ν•λ©°, μ£Όλ΅ `HTTP` κ³„μ—΄μ™€ `WebRTC` κ³„μ—΄ ν”„λ΅ν† μ½μ΄ μμ

**μ„ νƒ κ°€λ¥ν• ν”„λ΅ν† μ½**
| ν”„λ΅ν† μ½ | μ‹λ³„μ |
| --- | --- |
| HTTP/1.1 | http/1.1|
| SPDY/1 | spdy/1 |
| SPDY/2 | spdy/2 |
| SPDY/3 | spdy/3 |
| Traversal Using Relays around NAT(TURN) | stun.turn|
| NAT discovery using Session Traversal Utilities for NAT(STUN) | stun.nat-discovery |
| HTTP2 over TLS | h2|
| HTTP2 over TCP | h2c |
| WebRTC λ―Έλ””μ–΄μ™€ λ°μ΄ν„° | webrtc|
| Confidential WebRTC λ―Έλ””μ–΄μ™€ λ°μ΄ν„° | c-webrtc |
| FTP | ftp |

#### TLSκ°€ μ§€ν‚¤λ” κ²ƒ

- TLSλ” ν†µμ‹  κ²½λ΅μ μ•μ „μ„ μ§€ν‚¤κΈ° μ„ν• κµ¬μ΅°
  - ν΄λΌμ΄μ–ΈνΈμ™€ μ„λ²„ κ°„ ν†µμ‹  κ²½λ΅λ¥Ό μ „ν€ μ‹ λΆ°ν•  μ μ—†λ” μƒνƒμ—μ„λ„ μ•μ „ν•κ² ν†µμ‹  κ°€λ¥ν•λ„λ΅ μ„¤κ³„λ¨
  - λ„μ²­, μ΅°μ‘, μ‚¬μΉ­ν•  μ μ—†λ” μ•μ „ν• ν†µμ‹  μ κ³µ

**TLS 1.3**

- μΈμ¦ μ•”νΈ μ•κ³ λ¦¬μ¦ μ΄μ©
  - μ΅°μ‘, μ‚¬μΉ­μ΄ λ¶κ°€λ¥ν•λ„λ΅ λ³΄νΈ
- κ³µν†µ ν‚¤μ μ•μ „ν• κµν™μ΄ μ¤‘μ”
  - ν‚¤λ¥Ό μ°Ύμ•„λ‚΄κΈ° μ–΄λ µλ„λ΅ `DHE`, `ECDHE` λ“±μ ν‚¤ κµν™ μ•κ³ λ¦¬μ¦ μ΄μ©
  - μΈμ¦μ„μ™€ ν•¨κ» μ‚¬μ©ν•΄ μ΅°μ‘ μ„ν—μ„± κ°μ†

**TLS 1.2**

- κ³µκ° ν‚¤ μ•”νΈλ΅ ν‚¤λ¥Ό κµν™ν•λ” λ°©λ²• μ κ³µ
- μλ°©ν–¥ λΉ„λ°€μ„±μ€ μ•½ν•λ‚, λΉ„λ°€ ν‚¤λ§ μ§€ν‚¤λ©΄ ν†µμ‹  λ³΄νΈ κ°€λ¥
- μΈμ¦μ„μ μ•μ „μ„±μ€ λ°ν–‰μκ°€ λ³΄μ¦

**TLSκ°€ λ³΄νΈν•μ§€ μ•λ” κ²ƒλ“¤**

- ν†µμ‹  κ²½λ΅ λ°–μ— μλ” λ°μ΄ν„°
- μ„λ²„κ°€ ν¬λ™?λμ„ λ•μ μ •λ³΄

### 4.3 PUT λ©”μ„λ“μ™€ DELETE λ©”μ„λ“μ ν‘μ¤€ν™”

- HTTP/1.0μ—μ„λ” μµμ…μ΄μ—λ `PUT`κ³Ό `DELETE` λ©”μ„λ“κ°€ HTTP/1.1μ—μ„λ” ν•„μ λ©”μ„λ“λ΅ μ¶”κ°€λ¨
- μ΄λ΅μ¨ DBμ—μ„ λ°μ΄ν„°λ¥Ό λ‹¤λ£° λ• μ‚¬μ©ν•λ” CRUDκ°€ κ°–μ¶”μ–΄μ§
  - `HTTP`λ” λ„νλ¨ΌνΈλ¥Ό λ‹¤λ£¨λ” κ³ μμ¤€ API
  - λ°λ©΄, `CRUD`λ” ν”„λ¦¬λ―Έν‹°λΈν• μ΅°μ‘μ΄λΌλ” λ° μ°¨μ΄κ°€ μμ
- `PUT`κ³Ό `DELETE`λ” `GET`κ³Ό `POST`μ™€ λ‹¬λ¦¬ HTML formμ—μ„λ” μ‚¬μ© λ¶κ°€
  - `XMLHttpRequest` μ΄μ©ν•΄μ•Ό ν•¨

**λ°μ΄ν„°λ¥Ό λ‹¤λ£¨λ” κΈ°λ³Έ λ©”μ„λ“**

| HTTP λ©”μ„λ“ | λ€μ‘ν•λ” CRUD μ΅°μ‘ |  SQL   |
| :---------: | :----------------: | :----: |
|     GET     |        Read        | select |
|    POST     |       Create       | insert |
|     PUT     |       Update       | update |
|   DELETE    |       Delete       | delete |

> π’΅ Axiosμ™€ XMLHttpRequest  
> μ°Ύμ•„λ³΄κ³  μ¶”κ°€ν•κΈ°

### 4.4 OPTIONS, TRACE, CONNECT λ©”μ„λ“ μ¶”κ°€

#### OPTIONS

- μ„λ²„κ°€ λ°›μ•„λ“¤μΌ μ μλ” λ©”μ„λ“ λ©λ΅ λ°ν™
- μ‘λ‹µ μ¤‘ Allow ν—¤λ”μ— λ©”μ„λ“ λ©λ΅ μ΅΄μ¬
- μ‹¤μ λ΅ λ€λ¶€λ¶„μ μ›Ή μ„λ²„λ” OPTIONS λ©”μ„λ“λ¥Ό ν—μ©ν•κ³  μμ§€ μ•μΌλ‚ λΈλΌμ°μ €κ°€ λ‹¤λ¥Έ μ„λ²„μ— μ”μ²­μ„ λ³΄λ‚Ό λ• μ‚¬μ „ ν™•μΈμ— μ‚¬μ©λλ” κ²½μ°λ” μμ

```
curl -X OPTIONS -v https://curl.se

.
.
< HTTP/2 200
< server: nginx/1.21.1
< content-type: text/html
< x-frame-options: SAMEORIGIN
< allow: OPTIONS,HEAD,GET,POST
< cache-control: max-age=60
< expires: Sun, 11 Jun 2023 21:53:55 GMT
< x-content-type-options: nosniff
< content-security-policy: default-src 'self' curl.haxx.se www.curl.se curl.se www.fastly-insights.com fastly-insights.com; style-src 'unsafe-inline' 'self' curl.haxx.se www.curl.se curl.se
< strict-transport-security: max-age=31536000
< accept-ranges: bytes
< via: 1.1 varnish, 1.1 varnish
< date: Sun, 11 Jun 2023 21:52:55 GMT
< x-served-by: cache-bma1639-BMA, cache-icn1450058-ICN
< x-cache: MISS, MISS
< x-cache-hits: 0, 0
< x-timer: S1686520374.287675,VS0,VE1087
< vary: Accept-Encoding
< alt-svc: h3=":443";ma=86400,h3-29=":443";ma=86400,h3-27=":443";ma=86400
< content-length: 0
```

#### TRACE(TRACK)

- μ„λ²„λ” TRACE λ©”μ„λ“λ¥Ό λ°›μΌλ©΄ `Content-Type`μ— `message/http`λ¥Ό μ„¤μ •ν•κ³  `Status Code 200 OK`λ¥Ό λ¶™μ—¬ μ”μ²­ ν—¤λ”μ™€ λ°”λ””λ¥Ό κ·Έλ€λ΅ λ°ν™ν•¨
- ν¬λ΅μ¤ μ‚¬μ΄νΈ μ¤ν¬λ¦½ν…(XSS)κ³Ό ν¬λ΅μ¤ μ‚¬μ΄νΈ νΈλ μ΄μ‹±(XST)μ΄λΌλ” μ·¨μ•½μ„±μΌλ΅ μ λ…ν•΄μ Έ ν„μ¬λ” κ±°μ μ‚¬μ©λμ§€ μ•κ³  μμ
- ν„μ¬ λΈλΌμ°μ €μ—μ„λ„ XMLHttpRequestλ΅ TRACE λ©”μ„λ“λ¥Ό λ³΄λ‚΄λ” κ²ƒμ„ ν—μ©ν•κ³  μμ§€ μ•μ

> π’΅ ν¬λ΅μ¤ μ‚¬μ΄νΈ μ¤ν¬λ¦½ν…(XSS, Cross-Site Scripting)  
> μ„μμ μ•…μμ μΈ μ¤ν¬λ¦½νΈλ¥Ό λΈλΌμ°μ €μ— μ‹¤ν–‰

> π’΅ ν¬λ΅μ¤ μ‚¬μ΄νΈ νΈλ μ΄μ‹±(XST, Cross-Site Tracing)  
> BASIC μΈμ¦ μ‚¬μ©μμ™€ ν¨μ¤μ›λ“ μ¥μ•…

#### CONNECT

- HTTP ν”„λ΅ν† μ½μƒμ— λ‹¤λ¥Έ ν”„λ΅ν† μ½μ ν¨ν‚·μ„ νλ¦΄ μ μκ² ν•΄μ£Όλ” λ©”μ„λ“
- ν”„λ΅μ‹ μ„λ²„λ¥Ό κ±°μ³ λ€μƒ μ„λ²„μ— μ ‘μ†ν•λ” κ²ƒμ„ λ©μ μΌλ΅ ν•λ©°, μ£Όλ΅ https ν†µμ‹ μ„ μ¤‘κ³„ν•λ” μ©λ„λ΅ μ‚¬μ©λ¨
